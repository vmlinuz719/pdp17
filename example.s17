@10
PUSH,   DCA A1 I Z PC       / 01100111 00001111 - 670f
SAV1,   #0000               /                   - 0000 @11

        CLA CMA A1          / 11100100 10100000 - e4a0
        TAD A1 Z I6         / 00100101 00001110 - 250e
        DCA A0 I Z A1       / 01100011 00000001 - 6301
        DCA A1 Z I6         / 01100101 00001110 - 650e
        TAD A1 SAV1         / 00100100 00010001 - 2411
        JMP I Z A6          / 10100011 00000110 - a306

/ To pop, just do TAD Ax I Z I6

@18
GETPKC, CLA A0              / 11100000 10000000 - e080
        TAD A0 I Z A1       / 00100011 00000001 - 2301
        SNL                 / 11100001 00010000 - e110
        JMP MASK            / 10100000 xxxxxxxx - a01e
        
        HSW A0              / 11100100 00001110 - e00e
        IAC A1              / 11100100 00000001 - e401
        
MASK,   CML                 / 11100000 00010000 - e010 @1e
        AND A0 I Z PC       / 00000011 0000FFFF - 030f
        #00FF               /                   - 00ff
        
        JMP I Z A6          / 10100011 00000110 - a306

@22
PUTCHR, TPC A0              / 11000000 00100100 - c024
WAIT,   TSF                 / 11000000 00100001 - c021 @23
        JMP WAIT            / 10100000 xxxxxxxx - a023
        JMP I Z A6          / 10100011 00000110 - a306

@26
PRINT,  DCA A6 I Z PC       / 01111011 00001111 - 7b0f
SAVR,   #0000               /                   - 0000 @27
        
LOOP,   JMS A6 GETPKC       / 10011000 00011000 - 9818 @28
        
        SNA A0              / 11100001 00101000 - e128
        JMP END             / 10100000 xxxxxxxx - a02d
        
        JMS A6 PUTCHR       / 10011000 00100010 - 9822
        
        JMP LOOP            / 10100000 xxxxxxxx - a028

END,    CLA CML A6          / 11111000 10010000 - f890 @2d
        TAD A6 SAVR         / 00111000 xxxxxxxx - 3827
        JMP I Z A6          / 10100011 00000110 - a306

@30
READ,   DCA A2, X0000       / 01101011 00001111 - 6b0f
                            /                   - 0000
        DCA A3, X0000       / 01101111 00001111 - 6f0f
                            /                   - 0000
        DCA A4, X0000       / 01110011 00001111 - 730f
                            /                   - 0000

        MOV A0, A1          / 11100011 00000001 - e301        
        DCA A1, I0          / 01100101 00001000 - 6508
        CLL CMA IAC A0  	/ 11100000 01100001 - e061
        
LOOP,   LDA A4, X000A       / 10110111 00001111 - b70f
                            /                   - 000a
        
        KSF                 / 11000000 00110001 - c031
        JMP .-1             / 10100000 00111011 - a03b
        
        KRB A2              / 11001000 00110001 - c836
        
        CML                 / 11100000 00010000 - e010
        IOR A3, A2			/ 11101111 00100010 - ef22
        
        XOR A4, A2			/ 11110011 00110010 - f332
        SZA A4				/ 11110001 00100000 - f120
        SNL					/ 11100001 00010000 - e110
        DCA A3, *I0			/ 01101111 00001000 - 6f08

		HSW A3              / 11101100 00001110 - ec0e

        SZA A4				/ 11110001 00100000 - f120
        JMP LOOP			/ 10100000 00111001 - a039

        LDA A2, READ+1		/ 10101100 00110001 - ac31
        LDA A3, READ+3		/ 10110000 00110011 - b033
        LDA A4, READ+5		/ 10110100 00110101 - b435

        ADD A0, I0			/ 00100001 00001000 - 2108

        CLL					/ 11100000 01000000 - e040
        RET					/ 10100011 00000110 - a306


/ Load A1 with string address

a18
de080
d2301
de110
da01e
de00e
de401
de010
d030f
d00ff
da306
dc024
dc021
da023
da306
d7b0f
d0000
d9818
de128
da02d
d9822
da028
df890
d3827
da306

